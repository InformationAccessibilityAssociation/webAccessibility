<!DOCTYPE HTML>
<!-- saved from url=(0088)http://www.w3.org/WAI/WCAG20/Techniques/working-examples/ARIA21/Form-AriaLiveWithJQ.html -->
<!DOCTYPE html PUBLIC "" ""><HTML lang="zh-CN"><HEAD><META content="IE=11.0000" 
http-equiv="X-UA-Compatible">
 <TITLE>JQuery使用aria-live=assertive和aria-invalid通知输入错误</TITLE> 
<META charset="utf-8"> 
<SCRIPT src="js/jquery-1.10.2.js"></SCRIPT>
 
<SCRIPT>
$(document).ready(function(e) {
	$('#signup').submit(function() {
		$('#errText').html('');
$('input').removeAttr("aria-invalid");
$('label').removeAttr("class");
var eFlag = 0;
		if ($('#first').val() === '') {
			$('#first').attr("aria-invalid", "true");
$("label[for='first']").addClass('failed');
eFlag++;
		}
		if ($('#last').val() === '') {
			$('#last').attr("aria-invalid", "true");
$("label[for='last']").addClass('failed');
eFlag++;
		} 
		if ($('#email').val() === '') {
			$('#email').attr("aria-invalid", "true");
$("label[for='email']").addClass('failed');
eFlag++;
		} 
if (eFlag > 0) {
		$('#errText').html("请完成所有必填区域(" + eFlag + ") ，请重试！").focus();
}
		return false;
	});
});
</SCRIPT>
 
<STYLE type="text/css">
label.failed {
	border: red thin solid;
}
</STYLE>
 
<META name="GENERATOR" content="MSHTML 11.00.9600.18057"></HEAD> 
<BODY>

<p><a href="../2_aria-invalid_error.html">返回</a></p>
<H2 tabindex="-1" id="errText" aria-live="assertive"></H2>
<FORM name="signup" id="signup" action="#" method="post">
<P><LABEL for="first">名(必填)</LABEL><BR><INPUT name="first" id="first" type="text"> 
  </P>
<P><LABEL for="last">姓(必填)</LABEL><BR><INPUT name="last" id="last" type="text"> 
  </P>
<P><LABEL for="email">Email 
(必填)</LABEL><BR><INPUT name="email" id="email" type="text">   </P>
<P><INPUT name="button" id="button" type="submit" value="提交">   
</P></FORM>
<p>注意：</p>
<ul>
<li>aria-live字符串。可选值有：off, polite, assertive, rude。默认为off, 表示不宣布更新；polite表示只有用户闲时宣布；assertive表示尽快对用户宣布；rude表示即时提醒用户，必要的时候甚至中断用户。</li>
<li>在IE11浏览器中，使用争渡公益版屏幕阅读器，h2元素加入aria-live="assertive"，光标浏览朗读编辑框；编辑框无数据输入提交时，编辑框代码中添加aria-invalid="true"，聚焦输入框，无提示；至少有一个编辑框未输入内容时，点击提交按钮后，编辑框代码中添加aria-invalid="true"，自动朗读错误提示：“请完成所有必填区域，请重试！ 编辑框” 。</li>
  <li>在IE11浏览器中，使用永德屏幕阅读器，h2元素加入aria-live="assertive"，光标浏览朗读标题；编辑框无数据输入提交时，编辑框代码中添加aria-invalid="true"，重新聚焦编辑框，除了编辑框原有朗读外，会有“高级警报”提示；至少有一个编辑框未输入内容时，自动朗读自动朗读错误提示：“请完成所有必填区域，请重试！ 编辑框”。</li>
  <li>在IE浏览器中，使用NVDA屏幕阅读器，h2元素加入aria-live="assertive"，光标浏览朗读标题；编辑框无数据输入提交时，编辑框代码中添加aria-invalid="true"，重新聚焦编辑框，屏幕阅读器朗读：“编辑框标签+“错误的输入”+编辑框内容”，例如当输入内容为12时，朗读“名必填  错误的输入 12”；至少有一个编辑框未输入内容时，自动朗读自动朗读错误提示：“请完成所有必填区域，请重试！ 编辑框”。</li>
</ul>

</BODY></HTML>
